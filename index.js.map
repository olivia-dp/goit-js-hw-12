{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nexport default fetchData;\n\n\n\nconst BASE_URL = \"https://pixabay.com/api/\";\n\n\nasync function fetchData (imgName, page= 1, perPage = 15) {\n    const params = new URLSearchParams ({\n        key: \"46809493-025d46e6636e036ef2e71f554\",\n        q: imgName,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page,\n        per_page: perPage\n    \n    });\n    \n   const result = await axios(`${BASE_URL}?${params}`);\n   return result.data; \n}\n\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nexport default createMarkup;\n\nfunction createMarkup(arr) {\n    return arr.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads}) => `\n        \n        <li class=\"img-card\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\"><img class=\"img\" src=\"${webformatURL}\" alt=\"${tags}\" width=360 height=200></a>\n           <div class=\"text-container\">\n           <p class=\"text\">Likes:</br>${likes}</p>\n                <p class=\"text\">Downloads:</br>${downloads}</p>\n                <p class=\"text\">Views:</br>${views}</p>\n                <p class=\"text\">Comments:</br>${comments}</p>\n           </div></li>`).join(\"\");\n}\n\n\nconst lightbox = new SimpleLightbox ('.img-card a', {\n    captionsData: 'alt',\n  captionDelay: 250,\n  overlayOpacity: 0.8,\n  widthRatio: 0.9,\n  heigtRatio: 0.9,\n})\n\nexport {lightbox}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport  fetchData from \"./js/pixabay-api\";\nimport createMarkup from \"./js/render-functions\";\nimport { lightbox } from \"./js/render-functions\";\n\n\n\nconst form = document.querySelector(\".search-form\");\nconst imgList = document.querySelector(\".img-list\");\nconst loader = document.querySelector(\".span\")\nconst loadBtn = document.querySelector(\".load\")\n\n\nform.addEventListener(\"submit\", imgSearch);\nloadBtn.addEventListener(\"click\", loadMoreImg);\n\nlet page = 300;\nconst perPage = 15;\nlet imgName = '';\n\n\n\nasync function imgSearch (event) {\n    event.preventDefault();\n    imgList.innerHTML = '';\n    page = 1;\n    imgName = event.target.elements.imgname.value.trim();\n    if(imgName === \"\") {\n        iziToast.show({\n            title: 'Please,',\n            message: 'fill the field',\n            titleColor: '#fff',\n            messageColor: '#fff',\n            messageSize: '16px',\n            backgroundColor: '#ef4040',\n            position: \"center\",\n        });\n        return;\n    }\nawait loadImages (imgName);\n}\n\n\nasync function loadImages (imgName) {\n    try {\n        loadBtn.classList.remove(\"load-more\");\n        loader.classList.add(\"loader\");\n        \n        const data = await fetchData(imgName, page, perPage);\n        if (data.hits.length === 0) {\n            iziToast.show({\n                title: 'Sorry,',\n                message: 'there are no images matching your search query. Please try again!',\n                titleColor: '#fff',\n                messageColor: '#fff',\n                messageSize: '16px',\n                backgroundColor: '#ef4040',\n                position: \"center\",\n            })\n            return;\n        }\n            imgList.innerHTML += createMarkup(data.hits);\n            loadBtn.classList.add(\"load-more\");\n            form.reset();\n            \n            lightbox.refresh();\n            \n            if (data.hits.length < perPage || page > Math.ceil(data.totalHits/perPage)) {\n                loadBtn.classList.remove(\"load-more\");\n                iziToast.show({\n                    message: `We're sorry, but you've reached the end of search results.`,\n                    titleColor: '#fff',\n                    messageColor: '#fff',\n                    messageSize: '16px',\n                    backgroundColor: '#ef4040',\n                    position: \"center\",\n                })\n            }\n            \n    }\n    catch(error) { iziToast.show({\n        message: 'Error',\n        titleColor: '#fff',\n        messageColor: '#fff',\n        messageSize: '16px',\n        backgroundColor: '#ef4040',\n        position: \"center\",\n    })}\n    finally{ loader.classList.remove(\"loader\")}\n}\n\nasync function loadMoreImg () {\n    page++;\n    const data = await loadImages(imgName);\n    const card = document.querySelector(\".img-card\");\n    const height = card.getBoundingClientRect().height;\n    window.scrollBy({left: 0,\n        top: height * 3,\n        behavior: \"smooth\"});\n}    \n\n\n"],"names":["BASE_URL","fetchData","imgName","page","perPage","params","axios","createMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","lightbox","SimpleLightbox","form","imgList","loader","loadBtn","imgSearch","loadMoreImg","event","iziToast","loadImages","data","height"],"mappings":"owBAKA,MAAMA,EAAW,2BAGjB,eAAeC,EAAWC,EAASC,EAAM,EAAGC,EAAU,GAAI,CACtD,MAAMC,EAAS,IAAI,gBAAiB,CAChC,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAUC,CAElB,CAAK,EAGF,OADe,MAAME,EAAM,GAAGN,CAAQ,IAAIK,CAAM,EAAE,GACpC,IACjB,CClBA,SAASE,EAAaC,EAAK,CACvB,OAAOA,EAAI,IAAI,CAAC,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IAAM;AAAA;AAAA;AAAA,4CAGpDL,CAAa,2BAA2BD,CAAY,UAAUE,CAAI;AAAA;AAAA,wCAEtEC,CAAK;AAAA,iDACIG,CAAS;AAAA,6CACbF,CAAK;AAAA,gDACFC,CAAQ;AAAA,uBACjC,EAAE,KAAK,EAAE,CAChC,CAGA,MAAME,EAAW,IAAIC,EAAgB,cAAe,CAChD,aAAc,MAChB,aAAc,IACd,eAAgB,GAChB,WAAY,GACZ,WAAY,EACd,CAAC,ECbKC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAU,SAAS,cAAc,WAAW,EAC5CC,EAAS,SAAS,cAAc,OAAO,EACvCC,EAAU,SAAS,cAAc,OAAO,EAG9CH,EAAK,iBAAiB,SAAUI,CAAS,EACzCD,EAAQ,iBAAiB,QAASE,CAAW,EAE7C,IAAIpB,EAAO,IACX,MAAMC,EAAU,GAChB,IAAIF,EAAU,GAId,eAAeoB,EAAWE,EAAO,CAK7B,GAJAA,EAAM,eAAc,EACpBL,EAAQ,UAAY,GACpBhB,EAAO,EACPD,EAAUsB,EAAM,OAAO,SAAS,QAAQ,MAAM,OAC3CtB,IAAY,GAAI,CACfuB,EAAS,KAAK,CACV,MAAO,UACP,QAAS,iBACT,WAAY,OACZ,aAAc,OACd,YAAa,OACb,gBAAiB,UACjB,SAAU,QACtB,CAAS,EACD,MACH,CACL,MAAMC,EAAYxB,CAAO,CACzB,CAGA,eAAewB,EAAYxB,EAAS,CAChC,GAAI,CACAmB,EAAQ,UAAU,OAAO,WAAW,EACpCD,EAAO,UAAU,IAAI,QAAQ,EAE7B,MAAMO,EAAO,MAAM1B,EAAUC,EAASC,EAAMC,CAAO,EACnD,GAAIuB,EAAK,KAAK,SAAW,EAAG,CACxBF,EAAS,KAAK,CACV,MAAO,SACP,QAAS,oEACT,WAAY,OACZ,aAAc,OACd,YAAa,OACb,gBAAiB,UACjB,SAAU,QAC1B,CAAa,EACD,MACH,CACGN,EAAQ,WAAaZ,EAAaoB,EAAK,IAAI,EAC3CN,EAAQ,UAAU,IAAI,WAAW,EACjCH,EAAK,MAAK,EAEVF,EAAS,QAAO,GAEZW,EAAK,KAAK,OAASvB,GAAWD,EAAO,KAAK,KAAKwB,EAAK,UAAUvB,CAAO,KACrEiB,EAAQ,UAAU,OAAO,WAAW,EACpCI,EAAS,KAAK,CACV,QAAS,6DACT,WAAY,OACZ,aAAc,OACd,YAAa,OACb,gBAAiB,UACjB,SAAU,QAC9B,CAAiB,EAGZ,MACY,CAAEA,EAAS,KAAK,CACzB,QAAS,QACT,WAAY,OACZ,aAAc,OACd,YAAa,OACb,gBAAiB,UACjB,SAAU,QAClB,CAAK,CAAC,QACK,CAAEL,EAAO,UAAU,OAAO,QAAQ,CAAC,CAC9C,CAEA,eAAeG,GAAe,CAC1BpB,IACa,MAAMuB,EAAWxB,CAAO,EAErC,MAAM0B,EADO,SAAS,cAAc,WAAW,EAC3B,sBAAqB,EAAG,OAC5C,OAAO,SAAS,CAAC,KAAM,EACnB,IAAKA,EAAS,EACd,SAAU,QAAQ,CAAC,CAC3B"}